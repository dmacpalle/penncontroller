/*! $AC$ PennController.newTimer(name,duration) Creates a new Timer element $AC$$AC$ PennController.getTimer(name) Retrieves an existing Timer element $AC$$AC$ Timer PElement.start() Starts the timer $AC$$AC$ Timer PElement.stop() Stops the timer $AC$$AC$ Timer PElement.wait() Waits until the timer elapses before proceeding $AC$$AC$ Timer PElement.settings.callback(commands) Will execute the specified command(s) whenever the timer elapses $AC$$AC$ Timer PElement.settings.log() Will log when the timer starts and ends in the results file $AC$$AC$ Timer PElement.test.ended() Checks that the timer has ever elapsed before $AC$$AC$ Timer PElement.test.running() Checks that the timer is currently running $AC$ */!function(t){var n={};function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(n){return t[n]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=131)}({131:function(t,n){window.PennController._AddElementType("Timer",function(t){this.immediate=function(n,e){void 0===e&&Number(n)>0&&(this.id=t.utils.guidGenerator(),e=n),this.duration=0,Number(e)>0?this.duration=Number(e):t.debug.error("Invalid duration for Timer &quot;"+n+"&quot;")},this.uponCreation=function(t){this.elapsed=!1,this.events=[],this.log=!1,this.running=!1,this.start=(()=>{this.startTime=Date.now(),this.running=!0,this.events.push(["Start","Start",this.startTime,"NULL"]);let t=()=>{this.running&&(Date.now()-this.startTime>=this.duration?this.done():window.requestAnimationFrame(t))};t()}),this.done=(()=>{this.running=!1,this.events.push(["End","End",Date.now(),"NULL"]),this.elapsed=!0,this.startTime=null}),t()},this.end=function(){if(this.running&&(this.running=!1,this.events.push(["End","NA","Never","Had to halt the timer at the end of the trial"])),this.log)for(let n in this.events)t.controllers.running.save(this.type,this.id,...this.events[n])},this.value=function(){return this.elapsed},this.actions={start:function(t){this.start(),t()},stop:function(t){this.running&&this.done(),t()},wait:function(t,n){if("first"==n&&this.elapsed)t();else{let e=!1,i=this.done;this.done=(()=>{i.apply(this),e||(n instanceof Object&&n._runPromises&&n.success?n._runPromises().then(n=>{"success"==n&&(e=!0,t())}):(e=!0,t()))})}}},this.settings={callback:function(t,...n){let e=this.done;this.done=async function(){e.apply(this);for(let t in n)await n[t]._runPromises()},t()},log:function(t){this.log=!0,t()}},this.test={ended:function(){return this.elapsed},running:function(){return this.running}}})}});