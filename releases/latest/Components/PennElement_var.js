/*! $AC$ PennController.newVar(name,value) Creates a new Var element $AC$$AC$ PennController.getVar(name) Retrieves an existing Var element $AC$$AC$ Var PElement.set(value) Sets the value (can be a function, e.g. v=>v+1 will increment the value) $AC$$AC$ Var PElement.settings.local() Ensures that the value of this Var element only affects the current trial $AC$$AC$ Var PElement.settings.global() Shares the value with all Var elements with the same name across trials $AC$$AC$ Var PElement.test.is(value) Checks the value of the Var element (can be a function, e.g. v=>v<10) $AC$$AC$ all PElements.setVar(var) Sets the value of the specified Var element with the current value of the element $AC$ */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=133)}({133:function(e,t){!function(){var e=null;let t=window.PennController.ResetPrefix;window.PennController.ResetPrefix=function(n){t(n),e="string"==typeof e?window[n]:window},window.PennController._AddElementType("Var",function(t){this.immediate=function(n,r){let o=window.PennController.Elements.getVar,i=t.controllers.underConstruction;window.PennController.Elements.getVar=function(e){let r=t.controllers.underConstruction.elements;if(e!=n||r.hasOwnProperty("Var")&&r.Var.hasOwnProperty(n))return o(e);{let n=t.controllers.running,r=t.controllers.underConstruction;t.controllers.running=null,t.controllers.underConstruction=i;let l=o(e);return t.controllers.running=n,t.controllers.underConstruction=r,l}},e&&(e.getVar=window.PennController.Elements.getVar),this.initialValue=r,this.value=r,this.scope="local",this.evaluate=(()=>this.value&&"Var"===this.value.type?this.value.evaluate():this.value)},this.uponCreation=function(e){let n=t.controllers.running.options.elements.Var[this.id];n&&"global"==n.scope&&n!=this?this.value=n.value:"local"==this.scope&&(this.value=this.initialValue),this.values=[],e()},this.end=function(){if(this.log&&this.log instanceof Array&&(this.log.indexOf("final")>-1&&t.controllers.running.save(this.type,this.id,"Final",this.value,Date.now(),"Value at the end of the trial"),this.log.indexOf("set")>-1)){for(let e in this.values)t.controllers.running.save(this.type,this.id,...this.values[e]);this.values.length||t.controllers.running.save(this.type,this.id,"Set","NA","Never","The Var element was never set during the trial")}},this.value=function(){return this.evaluate()},this.actions={set:function(e,t){"object"==typeof t&&t.hasOwnProperty("value")?this.value=t.value:t instanceof Function?this.value=t.apply(this,[this.value]):this.value=t,this.values.push(["Set",this.value,Date.now(),"NULL"]),e()}},this.settings={local:function(e){for(c in this.scope="local",t.controllers.list)t.controllers.list[c][this.id]==this&&(t.controllers.list[c][this.id]=null);e()},log:function(e,...t){t.length?this.log=t:this.log=["final"],e()},global:function(e){for(c in this.scope="global",t.controllers.list)t.controllers.list[c].elements.hasOwnProperty("Var")||(t.controllers.list[c].elements.Var={}),t.controllers.list[c].elements.Var[this.id]=this;e()}},this.test={is:function(e){return e instanceof RegExp?this.evaluate().match(e):e instanceof Function?e(this.evaluate()):this.evaluate()==e}}}),window.PennController._AddStandardCommands(function(e){this.actions={setVar:function(t,n){if("string"==typeof n){if(!e.controllers.running.options.elements.hasOwnProperty("Var"))return e.debug.error("No Var element named "+n+" found");e.controllers.running.options.elements.Var[n].value=window.PennController.Elements["get"+this.type](this.id).value}else e.debug.error("Invalid variable reference when trying to store "+this.id+"'s value",n);t()}}})}()}});